# criticalis
The purpose of this project is to create a platform to enable everyone to contribute to the improvement of popular works in the public domain. 

This project will use a favorite text of mine as the initial "subject." "The Treasury of David" is an original exposition and commentary on the book of Psalms by C. H. Spurgeon, composed in seven volumes, published in the late 19th century.

## Kinds of Improvements
### Corrections
Specifically, the correcting of older works where a computer generated version (using Optical Character Recognition) may have made mistakes due to peculiarities in language and printing styles (or insufficient algorithms).

Contributers may reference the original documents, but many of these errors are self evident.

For example, here is Psalm 1, first as originally printed in PDF, and then as an ePub automatically generated by OCR -- **I added the highlighting to show the kinds of errors that proliferate**:

<img src="images/example1-h.PNG?raw=true" width="600" alt="example-pdf-1"/>

<img src="images/example2-h.PNG?raw=true" width="600" alt="example-epub-2"/>

### Explanations
Many aging works contain phrases, spellings, obscure words and references that a modern reader may find confusing. The community would be helped to see a simple footnote explaining these things or providing references for further study.

For example, the word **controverted** as seen below was about 10 times more popular in 1880 as it is today, and still, is not very common. It might be worthwhile to add a short definition for the young reader.

<img src="images/example3.PNG?raw=true" width="600" alt="example-3"/>

<img src="images/example3-g.PNG?raw=true" width="600" alt="example-3-graph"/>

## How it works
The basic idea is nothing less than a very simplified interface for version control, like GitHub, but focused on texts. It needs to be simplified for the kinds of people that are best suited to making these corrections or comments. From the merely interested to world renown experts, rarely would they also be familiar with all the ins and outs of setting up 'git' on their system, cloning, branching, submitting pull requests, etc. This should all be as seamless as a social media platform where users can comment and press an up or down arrow to show approval (or disapproval).

The current concept is to provide the public domain version of the text to the reader, in a format which they may also use as a regular etext reading platform. The reader can then easily reference a particular location or set of words, and offer the corrective, along with explanatory notes. 

Other contributers should be able to see the recommendation and either approve or disapprove, and interact with the one submitting the change. In this way the community can self-govern after a fashion.

The curator of the work will be the one who decides if the corrective will make the cut, and the 'community improved' version will be the result.

The format will be the epub format. More on this will be forthcoming as I explore the capabilities and requirements.
    It needs to support, at a minimum, highlighting, and hyperlinks for referencing footnotes and whatnot.

## The way ahead

### Digestion / Implementation Notes / Examples (this is a living document)
This project will need to be a synthesis of an ePub reader and a git client. I'll likely attempt to find an open source ePub reader and a git client already implemented in NodeJS, and modify them to allow for good referencing of chunks.

Potential sources of implementations: 
- ePub reading
    - simple ePub streamer #[npm install epub](https://www.npmjs.com/package/epub) and the #[github page](https://github.com/julien-c/epub)
    - ePub to JSON, and some HTML generation - could be useful #[npm install epub-parser](https://www.npmjs.com/package/epub-parser) and #[the github](https://github.com/Vaporbook/epub-parser)
    - ePub from HTML #[npm install epub-gen](https://www.npmjs.com/package/epub-gen) and #[the github](https://github.com/cyrilis/epub-gen)
    - A streaming EPUB3 writer #[npm install streampub](https://www.npmjs.com/package/streampub) and #[the github](https://github.com/iarna/streampub)
    - The Readium projects look pretty good for rendering ePub3 content  #[the main site](http://readium.github.io/readium-project/) and the #[readium-shared-js](https://github.com/readium/readium-shared-js)
    - This may be a more simple integration #[Future Press](http://futurepress.org/) and #[the github](https://github.com/futurepress/epub.js)
        - it looks quite promising > Similar to a plugins, Epub.js implements events that can be "hooked" into. Thus you can interact with and manipulate the contents of the book.

As an example for what we are working with, the two graphics at the top of the page show Psalm 1, rendered in PDF and ePub. Below, is what it looks like inside the xml file (**content-0012.xml**) shows starting on line **1078** and skips a little to show how a paragraph ends and starts again:

```xml
    <div class='flow' style=''>
      <a class='page' id='GBS.PA1'></a>
      <div id='block.18.1.0.box.179.412.1310.1953.q.60' class='gtxt_body'>
        <a id='GBS.PA1.w.1.0.0'></a>
        <p class='gtxt_body' style='font-size:102%;text-align:center;' id='para.18.1.0.box.693.412.296.38.q.60'>PSALM I.</p>
        <a id='GBS.PA1.w.1.1.0'></a>
        <p class='gtxt_body' style='font-size:102%;text-indent:1em;' id='para.18.1.1.box.192.485.1294.163.q.60'>TrTLE.&#8212;
          <span style='font-style:italic;'>This </span>
          <span style='font-style:italic;'>Psalm </span>
          <span style='font-style:italic;'>may </span>
          <span style='font-style:italic;'>be </span>
          <span style='font-style:italic;'>regarded </span>
          <span style='font-style:italic;'>as </span>
          <span style='font-variant:small-caps;'>The </span>
          <span style='font-variant:small-caps;'>Preface </span>
          <span style='font-variant:small-caps;'>Psai.m, </span>
          <span style='font-style:italic;'>leaving </span>
          <span style='font-style:italic;'>in </span>
          <span style='font-style:italic;'>it </span>
          <span style='font-style:italic;'>a </span>
          <span style='font-style:italic;'>notifica</span>
          <span style='font-style:italic;'>tion </span>
          <span style='font-style:italic;'>of </span>
          <span style='font-style:italic;'>the </span>
          <span style='font-style:italic;'>contents </span>
          ....
                    <span style='font-style:italic;'>up </span>
          <span style='font-style:italic;'>a </span>
          <span style='font-style:italic;'>divine </span>
          <span style='font-style:italic;'>sermon. </span>
        </p>
        <a id='GBS.PA1.w.1.2.0'></a>
        <p class='gtxt_body' style='font-size:102%;text-indent:1em;' id='para.18.1.2.box.192.650.1294.164.q.60'>
          <span style='font-variant:small-caps;'>Division.</span>&#8212;
          <span style='font-style:italic;'>This </span>
          <span style='font-style:italic;'>Psalm </span>
          <span style='font-style:italic;'>consists </span>
          <span style='font-style:italic;'>of </span>
```

and it goes on like that. This excerpt shows how the first two paragraphs were assembled and the kind of thing we are dealing with.

The ideal situation would allow for a tap or a click on a word, and the selection of a phrase if wanted, and that being able to be modified and pushed back into the xml to simple change spelling.wording/punctuation -- or to add footnotes/references (which may require something more).

Each change submitted by the user would end up, in the background, being transmitted as commits and pull requests and/or issues. Ideally, only the .xml file is compressed and pushed, not the entire ePub. This will make things faster and preserve bandwidth.

There will need to be two branches -- one where the changes are viewable by all, and another where the accepted changes are integrated as a 'final' product.

A separate project would be perhaps some kind of machine learning method to take all these corrections and come up with a better OCR algorithm.



## Public References (downloaded copies are linked below and #[found here](sources/))
- The main source I retrieved the books from
    - #[Volume 1](https://books.google.com/books?id=XRZVAAAAYAAJ)
    - #[Volume 2](https://books.google.com/books?id=JeFJAAAAMAAJ)
    - #[Volume 3](https://books.google.com/books?id=bF4VAAAAYAAJ)
    - #[Volume 4](https://books.google.com/books?id=XdFJAAAAMAAJ)
    - #[Volume 5](https://books.google.com/books?id=jYcXAAAAYAAJ)
    - #[Volume 6](https://books.google.com/books?id=BtJJAAAAMAAJ)
    - #[Volume 7](https://books.google.com/books?id=s0EJAQAAIAAJ)
- The ePub version in this repository (OCR)
    - #[Volume 1](sources/The_Treasury_of_David-I.epub)
    - #[Volume 2](sources/The_Treasury_of_David-II.epub)
    - #[Volume 3](sources/The_Treasury_of_David-III.epub)
    - #[Volume 4](sources/The_Treasury_of_David-IV.epub)
    - #[Volume 5](sources/The_Treasury_of_David-V.epub)
    - #[Volume 6](sources/The_Treasury_of_David-VI.epub)
    - #[Volume 7](sources/The_Treasury_of_David-VII.epub)
- The PDF version from which the ePub was derived 
    - #[Volume 1](sources/The_Treasury_of_David-I.pdf)
    - #[Volume 2](sources/The_Treasury_of_David-II.pdf)
    - #[Volume 3](sources/The_Treasury_of_David-III.pdf)
    - #[Volume 4](sources/The_Treasury_of_David-IV.pdf)
    - #[Volume 5](sources/The_Treasury_of_David-V.pdf)
    - #[Volume 6](sources/The_Treasury_of_David-VI.pdf)
    - #[Volume 7](sources/The_Treasury_of_David-VII.pdf)


